BjPage
{
AdjustFrame:0
BeforeCreate:""
BodyProp:""
BootstrapVer:2
Caption:历史进程
Enabled:1
Name:BjPage1
PageID:FP93230E2CEC3E4E390E93396B7007A1DC
ParenClass:""
Visible:1
Workflow:0
Position
{
Height:600
Left:94
Top:87
Width:800
}
Events
{
Def:""
OnLoad:""
}
@
{
EasyScript
{
Caption:设置二级菜单
Code:"me.ControlProp[\"二级菜单/Active\"] = \"历史进程\";"
CodeType:load
Name:EasyScript1
Position
{
Height:20
Left:5
Top:-34
Width:163
}
}
UserControl
{
BeforeCreate:""
Caption:""
Enabled:1
Name:UserControl1
PathName:"/template/webmanagetemp.ui"
Visible:1
Position
{
Height:762
Left:35
Top:25
Width:948
}
@
{
Box
{
AfterCreate:""
BeforeCreate:""
Caption:""
Enabled:1
ExtProp:""
ID:""
Name:SettingClient
TagName:""
Visible:1
Position
{
Height:823
Left:16
Top:20
Width:906
}
@
{
BjSubmitArea
{
Action:""
BeforeCreate:""
Caption:""
ExtProp:""
FileUpload:0
Horz:0
ID:""
Inline:0
Method:post
Name:BjSubmitArea1
Search:0
Position
{
Height:700
Left:21
Top:16
Width:872
}
@
{
Box
{
AfterCreate:""
BeforeCreate:""
Caption:""
Enabled:1
ExtProp:""
ID:""
Name:Box1
TagName:""
Visible:1
Position
{
Height:162
Left:17
Top:10
Width:985
}
@
{
Box
{
AfterCreate:""
BeforeCreate:""
Caption:""
Enabled:1
ExtProp:""
ID:""
Name:Box3
TagName:""
Visible:1
Position
{
Height:78
Left:16
Top:11
Width:423
}
@
{
html_image
{
BeforeCreate:""
Caption:""
Enabled:1
ExtProp:"style=\"float:left;margin-top:7px\""
Name:html_image_1
Visible:1
src:"<% echo(FixUrl(\"/images/bankuaijiantou.gif\")); %>"
Position
{
Height:45
Left:13
Top:14
Width:50
}
}
Box
{
AfterCreate:""
BeforeCreate:""
Caption:""
Enabled:1
ExtProp:"style=\"float:left;\""
ID:""
Name:Box5
TagName:span
Visible:1
Position
{
Height:55
Left:76
Top:14
Width:331
}
@
{
BjBreadcrumbNav
{
BeforeCreate:""
ExtProp:"style=\"background-Color:white;padding:2px;margin:2px\" "
Name:BjBreadcrumbNav1
Position
{
Height:40
Left:11
Top:5
Width:307
}
@
{
BjBreadcrumb
{
Active:""
BeforeCreate:""
Caption:桌面
Divider:"/"
Enabled:1
Name:BjBreadcrumb1
Visible:1
href:"<%echo(FixUrl(\"/main/mydesk.esh\"));%>"
Position
{
Height:20
Left:9
Top:12
Width:80
}
}
BjBreadcrumb
{
Active:""
BeforeCreate:""
Caption:历史进程
Divider:""
Enabled:1
Name:BjBreadcrumb2
Visible:1
href:""
Position
{
Height:20
Left:97
Top:12
Width:80
}
}
}
}
}
}
}
}
Box
{
AfterCreate:""
BeforeCreate:""
Caption:""
Enabled:1
ExtProp:"style=\"float:right\""
ID:""
Name:Box4
TagName:""
Visible:1
Position
{
Height:89
Left:613
Top:11
Width:320
}
@
{
BjButton
{
BeforeCreate:""
Block:0
ButtonType:back
Caption:"<i class=\"icon-repeat \" style=\"margin-right:5px\" ></i>返回"
Enabled:1
Feedback:default
ID:""
Inline:1
Name:BjButton2
Size:default
URL:""
URLParam:""
Visible:1
Position
{
Height:20
Left:112
Top:39
Width:80
}
Events
{
OnClick:""
OnClientClick:""
}
}
}
}
Box
{
AfterCreate:""
BeforeCreate:""
Caption:""
Enabled:1
ExtProp:"class=\"clearfix\" style=\"margin-bottom:5px\""
ID:""
Name:Box6
TagName:""
Visible:1
Position
{
Height:22
Left:0
Top:132
Width:493
}
}
}
}
Box
{
AfterCreate:""
BeforeCreate:""
Caption:""
Enabled:1
ExtProp:"class=\"line\" style=\"magrin-top:5px;margin-bottom:5px;\""
ID:""
Name:Box2
TagName:""
Visible:1
Position
{
Height:30
Left:17
Top:184
Width:985
}
}
Box
{
AfterCreate:""
BeforeCreate:""
Caption:""
Enabled:1
ExtProp:"style=\"margin-top:5px;margin-bottom:10px\""
ID:""
Name:Box1
TagName:""
Visible:1
Position
{
Height:79
Left:17
Top:226
Width:619
}
}
BjDataGrid
{
BeforeCreate:"
if( int(me._vo.isdelete) == 1 )
{
	(new dao.table(\"t_wf_process\")).Delete(\"id\",me._vo.id);
}
"
Caption:""
DeleteUrl:""
DellHint:确定删除选定的项？
EditUrl:""
Enabled:1
MaxPage:9
Name:processlist
PageSize:20
URLParam:""
URLParamDel:""
UsePager:1
Visible:1
border:1
condensed:1
hover:1
striped:1
Position
{
Height:104
Left:23
Top:324
UseHeight:0
UseWidth:0
Width:600
}
Events
{
CanDelete:"return false;"
CanEdit:"return false;"
CanSelect:"return true;"
OnGetData:"
var ret = (new dao.table(\"t_wf_process_his\")).GetData(
		_CurPage,
		_PageSize,
		\"select a.*,b.alias,c.displayname from t_wf_process_his a left join t_user b on a.userid=b.id left join t_wf_app c on a.appid=c.name and a.appver=c.ver\",
		\"where 1=1 order by starttime desc\");
var datas = ret.Datas;
each(a,datas)
{
	if( a.pid <> \"\" )
	{
		a.userid = \"[父流程]\";
	}
	else
	{
		if( 0 == int(a.userid) )
		{
			a.userid=\"[定时器]\";
		}
		else
		{
			a.userid = a.alias;
		}
	}
	a.status = staticcall(\"Workflow.Model.Process.StatusText\",a.status);
}
return datas;
"
OnGetTotalPage:"
var ret = (new dao.table(\"t_wf_process_his\")).GetDataCount(_PageSize,\"\");

return ret.TotalPage;
"
}
@
{
BjDataGridColumn
{
BeforeCreate:""
CanView:0
Caption:"#"
ColWidth:""
Enabled:1
Field:""
IsKey:0
IsOperator:0
IsSerial:1
Name:""
StaticUrl:0
ViewUrl:""
Visible:1
Position
{
Height:20
Left:10
Top:10
Width:20
}
}
BjDataGridColumn
{
BeforeCreate:""
CanView:0
Caption:""
ColWidth:""
Enabled:1
Field:""
IsKey:0
IsOperator:1
IsSerial:0
Name:""
StaticUrl:0
ViewUrl:""
Visible:1
Position
{
Height:20
Left:40
Top:10
Width:20
}
}
BjDataGridColumn
{
BeforeCreate:""
CanView:1
Caption:流程名称
ColWidth:""
Enabled:1
Field:displayname
IsKey:0
IsOperator:0
IsSerial:0
Name:appid
StaticUrl:0
ViewUrl:processinfo.esh
Visible:1
Position
{
Height:20
Left:81
Top:10
Width:78
}
}
BjDataGridColumn
{
BeforeCreate:""
CanView:0
Caption:流程版本
ColWidth:""
Enabled:1
Field:appver
IsKey:0
IsOperator:0
IsSerial:0
Name:appver
StaticUrl:0
ViewUrl:""
Visible:1
Position
{
Height:20
Left:174
Top:10
Width:78
}
}
BjDataGridColumn
{
BeforeCreate:""
CanView:0
Caption:启动者
ColWidth:""
Enabled:1
Field:userid
IsKey:0
IsOperator:0
IsSerial:0
Name:userid
StaticUrl:0
ViewUrl:""
Visible:1
Position
{
Height:20
Left:265
Top:10
Width:78
}
}
BjDataGridColumn
{
BeforeCreate:""
CanView:0
Caption:启动时间
ColWidth:""
Enabled:1
Field:starttime
IsKey:0
IsOperator:0
IsSerial:0
Name:starttime
StaticUrl:0
ViewUrl:""
Visible:1
Position
{
Height:20
Left:358
Top:10
Width:78
}
}
BjDataGridColumn
{
BeforeCreate:""
CanView:1
Caption:进程ID
ColWidth:""
Enabled:1
Field:id
IsKey:1
IsOperator:0
IsSerial:0
Name:id
StaticUrl:0
ViewUrl:processinfo.esh
Visible:0
Position
{
Height:20
Left:455
Top:10
Width:78
}
}
BjDataGridColumn
{
BeforeCreate:""
CanView:0
Caption:父进程
ColWidth:""
Enabled:1
Field:pid
IsKey:0
IsOperator:0
IsSerial:0
Name:pid
StaticUrl:0
ViewUrl:""
Visible:1
Position
{
Height:20
Left:81
Top:55
Width:78
}
}
BjDataGridColumn
{
BeforeCreate:""
CanView:0
Caption:当前状态
ColWidth:""
Enabled:1
Field:status
IsKey:0
IsOperator:0
IsSerial:0
Name:status
StaticUrl:0
ViewUrl:""
Visible:1
Position
{
Height:20
Left:174
Top:53
Width:78
}
}
BjDataGridColumn
{
BeforeCreate:""
CanView:0
Caption:原因
ColWidth:""
Enabled:1
Field:reason
IsKey:0
IsOperator:0
IsSerial:0
Name:reason
StaticUrl:0
ViewUrl:""
Visible:1
Position
{
Height:20
Left:266
Top:54
Width:78
}
}
}
}
}
}
}
}
}
}
}
}
